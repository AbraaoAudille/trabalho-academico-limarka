language: ruby
env:
- PDF_NOME=monografia-fulano-de-tal.pdf NOME="Fulano de Tal" EMAIL="fulano@mail.com"
services:
- docker
before_script:
- docker build -t limarka:customizado .
script: 
- docker run --mount src=`pwd`,target=/trabalho,type=bind limarka:customizado
- mv xxx*.pdf $PDF_NOME
after_failure:
  - cat test/latex/exemplo-minimo/xxx-*.log
before_deploy:
  # Para fazer deploy faz-se necess√°rio criar uma tag
  - git config --local user.name $NOME
  - git config --local user.email $EMAIL
  - export TRAVIS_TAG=${TRAVIS_TAG:-$(date +'%Y%m%d%H%M%S')-$(git log --format=%h -1)}
  - git tag $TRAVIS_TAG
deploy:
  provider: releases
	# Gere uma chave em https://github.com/settings/tokens/new marcar "repo"
  api_key: "db63e13807a984bce874fe00a2f72c1269ba37d5"
  file: $PDF_NOME
  skip_cleanup: true
  draft: true
